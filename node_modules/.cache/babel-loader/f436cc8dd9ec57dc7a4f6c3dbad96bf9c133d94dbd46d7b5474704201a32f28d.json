{"ast":null,"code":"'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport uniq from 'lodash/uniq';\nimport remove from 'lodash/remove';\nimport { useEventCallback } from \"../../internals/hooks/index.js\";\nimport { removeAllChildrenValue, getOtherItemValuesByUnselectChild } from \"../utils.js\";\n\n/**\n * Get all parents of a node\n * @param node\n */\nvar getParents = function getParents(node) {\n  var parents = [];\n  if (!node.parent) {\n    return parents;\n  }\n  parents.push(node.parent);\n  parents = parents.concat(getParents(node.parent));\n  return parents;\n};\n\n/**\n * A hook that converts the value into a cascading value\n * @param props\n * @param flattenData\n */\nfunction useCascadeValue(props, flattenData) {\n  var valueKey = props.valueKey,\n    childrenKey = props.childrenKey,\n    uncheckableItemValues = props.uncheckableItemValues,\n    cascade = props.cascade,\n    valueProp = props.value,\n    onChange = props.onChange,\n    onCheck = props.onCheck;\n\n  /**\n   * Get the values of all children\n   */\n  var getChildrenValue = useCallback(function (item) {\n    var values = [];\n    if (!item[childrenKey]) {\n      return values;\n    }\n    item[childrenKey].forEach(function (n) {\n      if (uncheckableItemValues && !uncheckableItemValues.some(function (v) {\n        return v === n[valueKey];\n      })) {\n        values.push(n[valueKey]);\n      }\n      values = values.concat(getChildrenValue(n));\n    });\n    return values;\n  }, [childrenKey, uncheckableItemValues, valueKey]);\n  var splitValue = useCallback(function (item, checked, value) {\n    var itemValue = item[valueKey];\n    var childrenValue = getChildrenValue(item);\n    var parents = getParents(item);\n    var nextValue = [].concat(value);\n    var removedValue = [];\n    if (checked) {\n      nextValue.push(itemValue);\n\n      // Delete all values under the current node\n      removedValue = removedValue.concat(removeAllChildrenValue(nextValue, item, {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }) || []);\n\n      // Traverse all ancestor nodes of the current node\n      // Then determine whether all the child nodes of these nodes are selected, and then they themselves must be selected\n      var _loop = function _loop(i) {\n        // Whether the parent node can be selected\n        var isCheckableParent = !(uncheckableItemValues !== null && uncheckableItemValues !== void 0 && uncheckableItemValues.some(function (v) {\n          return v === parents[i][valueKey];\n        }));\n        if (isCheckableParent) {\n          var isCheckAll = parents[i][childrenKey]\n          // Filter out options that are marked as not selectable\n          .filter(function (n) {\n            return !(uncheckableItemValues !== null && uncheckableItemValues !== void 0 && uncheckableItemValues.some(function (v) {\n              return v === n[valueKey];\n            }));\n          })\n          // Check if all nodes are selected\n          .every(function (n) {\n            return nextValue.some(function (v) {\n              return v === n[valueKey];\n            });\n          });\n          if (isCheckAll) {\n            // Add parent node value\n            nextValue.push(parents[i][valueKey]);\n\n            // Delete all values under the parent node\n            removedValue = removedValue.concat(removeAllChildrenValue(nextValue, parents[i], {\n              valueKey: valueKey,\n              childrenKey: childrenKey\n            }) || []);\n          }\n        }\n      };\n      for (var i = 0; i < parents.length; i++) {\n        _loop(i);\n      }\n    } else {\n      var tempValue = childrenValue.concat(parents.map(function (item) {\n        return item[valueKey];\n      }));\n      nextValue = nextValue.concat(getOtherItemValuesByUnselectChild(item, nextValue, {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }));\n\n      // Delete related child and parent nodes\n      removedValue = remove(nextValue, function (v) {\n        // Delete yourself\n        if (v === itemValue) {\n          return true;\n        }\n        return tempValue.some(function (n) {\n          return n === v;\n        });\n      });\n    }\n    var uniqValue = uniq(nextValue);\n    var uniqRemovedValue = uniq(removedValue);\n    return {\n      value: uniqValue,\n      removedValue: uniqRemovedValue\n    };\n  }, [valueKey, childrenKey, uncheckableItemValues, getChildrenValue]);\n  var transformValue = useCallback(function (value) {\n    if (value === void 0) {\n      value = [];\n    }\n    if (!cascade) {\n      return value;\n    }\n    var tempRemovedValue = [];\n    var nextValue = [];\n    var _loop2 = function _loop2(i) {\n        // If the value in the current value is already in the deleted list, it will not be processed\n        if (tempRemovedValue.some(function (v) {\n          return v === value[i];\n        })) {\n          return 0; // continue\n        }\n        var item = flattenData.find(function (v) {\n          return v[valueKey] === value[i];\n        });\n        if (!item) {\n          return 0; // continue\n        }\n        var sv = splitValue(item, true, value);\n        tempRemovedValue = uniq(tempRemovedValue.concat(sv.removedValue));\n\n        // Get all relevant values\n        nextValue = uniq(nextValue.concat(sv.value));\n      },\n      _ret;\n    for (var i = 0; i < value.length; i++) {\n      _ret = _loop2(i);\n      if (_ret === 0) continue;\n    }\n\n    // Finally traverse all nextValue, and delete if its parent node is also nextValue\n    return nextValue.filter(function (v) {\n      var item = flattenData.find(function (n) {\n        return n[valueKey] === v;\n      });\n      if (item !== null && item !== void 0 && item.parent && nextValue.some(function (v) {\n        var _item$parent;\n        return v === ((_item$parent = item.parent) === null || _item$parent === void 0 ? void 0 : _item$parent[valueKey]);\n      })) {\n        return false;\n      }\n      return true;\n    });\n  }, [cascade, flattenData, splitValue, valueKey]);\n  var _useState = useState(transformValue(valueProp) || []),\n    value = _useState[0],\n    setValue = _useState[1];\n  useEffect(function () {\n    // Update value when valueProp is updated.\n    setValue(transformValue(valueProp) || []);\n  }, [transformValue, valueProp]);\n  var handleCheck = useEventCallback(function (node, event, checked) {\n    var nodeValue = node[valueKey];\n    var nextValue = [];\n    if (cascade) {\n      nextValue = splitValue(node, checked, value).value;\n    } else {\n      nextValue = [].concat(value);\n      if (checked) {\n        nextValue.push(nodeValue);\n      } else {\n        nextValue = nextValue.filter(function (n) {\n          return n !== nodeValue;\n        });\n      }\n    }\n    setValue(nextValue);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n    onCheck === null || onCheck === void 0 ? void 0 : onCheck(nextValue, node, checked, event);\n  });\n  return {\n    value: value,\n    setValue: setValue,\n    splitValue: splitValue,\n    handleCheck: handleCheck\n  };\n}\nexport default useCascadeValue;","map":{"version":3,"names":["useState","useEffect","useCallback","uniq","remove","useEventCallback","removeAllChildrenValue","getOtherItemValuesByUnselectChild","getParents","node","parents","parent","push","concat","useCascadeValue","props","flattenData","valueKey","childrenKey","uncheckableItemValues","cascade","valueProp","value","onChange","onCheck","getChildrenValue","item","values","forEach","n","some","v","splitValue","checked","itemValue","childrenValue","nextValue","removedValue","_loop","i","isCheckableParent","isCheckAll","filter","every","length","tempValue","map","uniqValue","uniqRemovedValue","transformValue","tempRemovedValue","_loop2","find","sv","_ret","_item$parent","_useState","setValue","handleCheck","event","nodeValue"],"sources":["C:/Users/lenovo/OneDrive/Documents/local project/platfoorm45_technical_challenge/node_modules/rsuite/esm/MultiCascadeTree/hooks/useCascadeValue.js"],"sourcesContent":["'use client';\nimport { useState, useEffect, useCallback } from 'react';\nimport uniq from 'lodash/uniq';\nimport remove from 'lodash/remove';\nimport { useEventCallback } from \"../../internals/hooks/index.js\";\nimport { removeAllChildrenValue, getOtherItemValuesByUnselectChild } from \"../utils.js\";\n\n/**\n * Get all parents of a node\n * @param node\n */\nvar getParents = function getParents(node) {\n  var parents = [];\n  if (!node.parent) {\n    return parents;\n  }\n  parents.push(node.parent);\n  parents = parents.concat(getParents(node.parent));\n  return parents;\n};\n\n/**\n * A hook that converts the value into a cascading value\n * @param props\n * @param flattenData\n */\nfunction useCascadeValue(props, flattenData) {\n  var valueKey = props.valueKey,\n    childrenKey = props.childrenKey,\n    uncheckableItemValues = props.uncheckableItemValues,\n    cascade = props.cascade,\n    valueProp = props.value,\n    onChange = props.onChange,\n    onCheck = props.onCheck;\n\n  /**\n   * Get the values of all children\n   */\n  var getChildrenValue = useCallback(function (item) {\n    var values = [];\n    if (!item[childrenKey]) {\n      return values;\n    }\n    item[childrenKey].forEach(function (n) {\n      if (uncheckableItemValues && !uncheckableItemValues.some(function (v) {\n        return v === n[valueKey];\n      })) {\n        values.push(n[valueKey]);\n      }\n      values = values.concat(getChildrenValue(n));\n    });\n    return values;\n  }, [childrenKey, uncheckableItemValues, valueKey]);\n  var splitValue = useCallback(function (item, checked, value) {\n    var itemValue = item[valueKey];\n    var childrenValue = getChildrenValue(item);\n    var parents = getParents(item);\n    var nextValue = [].concat(value);\n    var removedValue = [];\n    if (checked) {\n      nextValue.push(itemValue);\n\n      // Delete all values under the current node\n      removedValue = removedValue.concat(removeAllChildrenValue(nextValue, item, {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }) || []);\n\n      // Traverse all ancestor nodes of the current node\n      // Then determine whether all the child nodes of these nodes are selected, and then they themselves must be selected\n      var _loop = function _loop(i) {\n        // Whether the parent node can be selected\n        var isCheckableParent = !(uncheckableItemValues !== null && uncheckableItemValues !== void 0 && uncheckableItemValues.some(function (v) {\n          return v === parents[i][valueKey];\n        }));\n        if (isCheckableParent) {\n          var isCheckAll = parents[i][childrenKey]\n          // Filter out options that are marked as not selectable\n          .filter(function (n) {\n            return !(uncheckableItemValues !== null && uncheckableItemValues !== void 0 && uncheckableItemValues.some(function (v) {\n              return v === n[valueKey];\n            }));\n          })\n          // Check if all nodes are selected\n          .every(function (n) {\n            return nextValue.some(function (v) {\n              return v === n[valueKey];\n            });\n          });\n          if (isCheckAll) {\n            // Add parent node value\n            nextValue.push(parents[i][valueKey]);\n\n            // Delete all values under the parent node\n            removedValue = removedValue.concat(removeAllChildrenValue(nextValue, parents[i], {\n              valueKey: valueKey,\n              childrenKey: childrenKey\n            }) || []);\n          }\n        }\n      };\n      for (var i = 0; i < parents.length; i++) {\n        _loop(i);\n      }\n    } else {\n      var tempValue = childrenValue.concat(parents.map(function (item) {\n        return item[valueKey];\n      }));\n      nextValue = nextValue.concat(getOtherItemValuesByUnselectChild(item, nextValue, {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }));\n\n      // Delete related child and parent nodes\n      removedValue = remove(nextValue, function (v) {\n        // Delete yourself\n        if (v === itemValue) {\n          return true;\n        }\n        return tempValue.some(function (n) {\n          return n === v;\n        });\n      });\n    }\n    var uniqValue = uniq(nextValue);\n    var uniqRemovedValue = uniq(removedValue);\n    return {\n      value: uniqValue,\n      removedValue: uniqRemovedValue\n    };\n  }, [valueKey, childrenKey, uncheckableItemValues, getChildrenValue]);\n  var transformValue = useCallback(function (value) {\n    if (value === void 0) {\n      value = [];\n    }\n    if (!cascade) {\n      return value;\n    }\n    var tempRemovedValue = [];\n    var nextValue = [];\n    var _loop2 = function _loop2(i) {\n        // If the value in the current value is already in the deleted list, it will not be processed\n        if (tempRemovedValue.some(function (v) {\n          return v === value[i];\n        })) {\n          return 0; // continue\n        }\n        var item = flattenData.find(function (v) {\n          return v[valueKey] === value[i];\n        });\n        if (!item) {\n          return 0; // continue\n        }\n        var sv = splitValue(item, true, value);\n        tempRemovedValue = uniq(tempRemovedValue.concat(sv.removedValue));\n\n        // Get all relevant values\n        nextValue = uniq(nextValue.concat(sv.value));\n      },\n      _ret;\n    for (var i = 0; i < value.length; i++) {\n      _ret = _loop2(i);\n      if (_ret === 0) continue;\n    }\n\n    // Finally traverse all nextValue, and delete if its parent node is also nextValue\n    return nextValue.filter(function (v) {\n      var item = flattenData.find(function (n) {\n        return n[valueKey] === v;\n      });\n      if (item !== null && item !== void 0 && item.parent && nextValue.some(function (v) {\n        var _item$parent;\n        return v === ((_item$parent = item.parent) === null || _item$parent === void 0 ? void 0 : _item$parent[valueKey]);\n      })) {\n        return false;\n      }\n      return true;\n    });\n  }, [cascade, flattenData, splitValue, valueKey]);\n  var _useState = useState(transformValue(valueProp) || []),\n    value = _useState[0],\n    setValue = _useState[1];\n  useEffect(function () {\n    // Update value when valueProp is updated.\n    setValue(transformValue(valueProp) || []);\n  }, [transformValue, valueProp]);\n  var handleCheck = useEventCallback(function (node, event, checked) {\n    var nodeValue = node[valueKey];\n    var nextValue = [];\n    if (cascade) {\n      nextValue = splitValue(node, checked, value).value;\n    } else {\n      nextValue = [].concat(value);\n      if (checked) {\n        nextValue.push(nodeValue);\n      } else {\n        nextValue = nextValue.filter(function (n) {\n          return n !== nodeValue;\n        });\n      }\n    }\n    setValue(nextValue);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n    onCheck === null || onCheck === void 0 ? void 0 : onCheck(nextValue, node, checked, event);\n  });\n  return {\n    value: value,\n    setValue: setValue,\n    splitValue: splitValue,\n    handleCheck: handleCheck\n  };\n}\nexport default useCascadeValue;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}