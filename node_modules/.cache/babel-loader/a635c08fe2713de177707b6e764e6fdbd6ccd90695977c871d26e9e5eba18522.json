{"ast":null,"code":"'use client';\n\nimport { useState, useCallback, useEffect } from 'react';\nimport isArray from 'lodash/isArray';\nimport { shouldDisplay } from \"../../internals/Picker/index.js\";\nimport { useItemDataKeys } from \"../../internals/Tree/TreeProvider.js\";\n/**\n * Custom hook for searching and filtering data in a tree structure.\n */\nexport default function useTreeSearch(props) {\n  var _useItemDataKeys = useItemDataKeys(),\n    labelKey = _useItemDataKeys.labelKey,\n    childrenKey = _useItemDataKeys.childrenKey;\n  var searchKeyword = props.searchKeyword,\n    data = props.data,\n    searchBy = props.searchBy,\n    callback = props.callback;\n  var filterVisibleData = useCallback(function (data, searchKeyword) {\n    var setVisible = function setVisible(nodes) {\n      return nodes.forEach(function (item) {\n        item.visible = searchBy ? searchBy(searchKeyword, item[labelKey], item) : shouldDisplay(item[labelKey], searchKeyword);\n        if (isArray(item[childrenKey])) {\n          filterVisibleData(item[childrenKey], searchKeyword);\n          item[childrenKey].forEach(function (child) {\n            if (child.visible) {\n              item.visible = child.visible;\n            }\n          });\n        }\n      });\n    };\n    setVisible(data);\n    return data;\n  }, [childrenKey, labelKey, searchBy]);\n\n  // Use search keywords to filter options.\n  var _useState = useState(searchKeyword !== null && searchKeyword !== void 0 ? searchKeyword : ''),\n    keyword = _useState[0],\n    setSearchKeyword = _useState[1];\n  var _useState2 = useState(function () {\n      return filterVisibleData(data, keyword);\n    }),\n    filteredData = _useState2[0],\n    setFilteredData = _useState2[1];\n  var handleSearch = function handleSearch(searchKeyword, event) {\n    var filteredData = filterVisibleData(data, searchKeyword);\n    setFilteredData(filteredData);\n    setSearchKeyword(searchKeyword);\n    if (event) {\n      callback === null || callback === void 0 ? void 0 : callback(searchKeyword, filteredData, event);\n    }\n  };\n  useEffect(function () {\n    handleSearch(searchKeyword !== null && searchKeyword !== void 0 ? searchKeyword : '');\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [searchKeyword]);\n  useEffect(function () {\n    setSearchKeyword(searchKeyword !== null && searchKeyword !== void 0 ? searchKeyword : '');\n  }, [searchKeyword, setSearchKeyword]);\n  var setVisibleData = useCallback(function (data, searchKeyword) {\n    setFilteredData(filterVisibleData(data, searchKeyword));\n  }, [filterVisibleData]);\n  return {\n    keyword: keyword,\n    filteredData: filteredData,\n    setFilteredData: setVisibleData,\n    setSearchKeyword: setSearchKeyword,\n    handleSearch: handleSearch\n  };\n}","map":{"version":3,"names":["useState","useCallback","useEffect","isArray","shouldDisplay","useItemDataKeys","useTreeSearch","props","_useItemDataKeys","labelKey","childrenKey","searchKeyword","data","searchBy","callback","filterVisibleData","setVisible","nodes","forEach","item","visible","child","_useState","keyword","setSearchKeyword","_useState2","filteredData","setFilteredData","handleSearch","event","setVisibleData"],"sources":["C:/Users/lenovo/OneDrive/Documents/local project/platfoorm45_technical_challenge/node_modules/rsuite/esm/Tree/hooks/useTreeSearch.js"],"sourcesContent":["'use client';\nimport { useState, useCallback, useEffect } from 'react';\nimport isArray from 'lodash/isArray';\nimport { shouldDisplay } from \"../../internals/Picker/index.js\";\nimport { useItemDataKeys } from \"../../internals/Tree/TreeProvider.js\";\n/**\n * Custom hook for searching and filtering data in a tree structure.\n */\nexport default function useTreeSearch(props) {\n  var _useItemDataKeys = useItemDataKeys(),\n    labelKey = _useItemDataKeys.labelKey,\n    childrenKey = _useItemDataKeys.childrenKey;\n  var searchKeyword = props.searchKeyword,\n    data = props.data,\n    searchBy = props.searchBy,\n    callback = props.callback;\n  var filterVisibleData = useCallback(function (data, searchKeyword) {\n    var setVisible = function setVisible(nodes) {\n      return nodes.forEach(function (item) {\n        item.visible = searchBy ? searchBy(searchKeyword, item[labelKey], item) : shouldDisplay(item[labelKey], searchKeyword);\n        if (isArray(item[childrenKey])) {\n          filterVisibleData(item[childrenKey], searchKeyword);\n          item[childrenKey].forEach(function (child) {\n            if (child.visible) {\n              item.visible = child.visible;\n            }\n          });\n        }\n      });\n    };\n    setVisible(data);\n    return data;\n  }, [childrenKey, labelKey, searchBy]);\n\n  // Use search keywords to filter options.\n  var _useState = useState(searchKeyword !== null && searchKeyword !== void 0 ? searchKeyword : ''),\n    keyword = _useState[0],\n    setSearchKeyword = _useState[1];\n  var _useState2 = useState(function () {\n      return filterVisibleData(data, keyword);\n    }),\n    filteredData = _useState2[0],\n    setFilteredData = _useState2[1];\n  var handleSearch = function handleSearch(searchKeyword, event) {\n    var filteredData = filterVisibleData(data, searchKeyword);\n    setFilteredData(filteredData);\n    setSearchKeyword(searchKeyword);\n    if (event) {\n      callback === null || callback === void 0 ? void 0 : callback(searchKeyword, filteredData, event);\n    }\n  };\n  useEffect(function () {\n    handleSearch(searchKeyword !== null && searchKeyword !== void 0 ? searchKeyword : '');\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [searchKeyword]);\n  useEffect(function () {\n    setSearchKeyword(searchKeyword !== null && searchKeyword !== void 0 ? searchKeyword : '');\n  }, [searchKeyword, setSearchKeyword]);\n  var setVisibleData = useCallback(function (data, searchKeyword) {\n    setFilteredData(filterVisibleData(data, searchKeyword));\n  }, [filterVisibleData]);\n  return {\n    keyword: keyword,\n    filteredData: filteredData,\n    setFilteredData: setVisibleData,\n    setSearchKeyword: setSearchKeyword,\n    handleSearch: handleSearch\n  };\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}