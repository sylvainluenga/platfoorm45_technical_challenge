{"ast":null,"code":"'use client';\n\nimport { shallowEqual } from \"../../internals/utils/index.js\";\n// Active tree node selector\nvar SELECTED_TREEITEM_SELECTOR = '[role=\"treeitem\"][aria-selected=\"true\"]';\n\n/**\n * Retrieves the focusable items from the filtered data based on the provided props.\n * Excludes nodes that are not visible or are disabled.\n */\nexport var getFocusableItems = function getFocusableItems(filteredData, props, isSearching) {\n  var disabledItemValues = props.disabledItemValues,\n    valueKey = props.valueKey,\n    childrenKey = props.childrenKey,\n    expandItemValues = props.expandItemValues;\n  var items = [];\n  var loop = function loop(nodes) {\n    nodes.forEach(function (node) {\n      var disabled = disabledItemValues.some(function (disabledItem) {\n        return shallowEqual(disabledItem, node[valueKey]);\n      });\n      if (!disabled && node.visible) {\n        items.push(node);\n      }\n      // always expand when searching\n      var expand = isSearching ? true : expandItemValues.includes(node[valueKey]);\n      if (node[childrenKey] && expand) {\n        loop(node[childrenKey]);\n      }\n    });\n  };\n  loop(filteredData);\n  return items;\n};\n\n/**\n * Returns the index of the active item in the focusItems array.\n *\n */\nvar getActiveIndex = function getActiveIndex(focusItemValue, focusItems, valueKey) {\n  var activeIndex = -1;\n  focusItems.forEach(function (item, index) {\n    if (shallowEqual(item[valueKey], focusItemValue)) {\n      activeIndex = index;\n    }\n  });\n  return activeIndex;\n};\n\n/**\n * Retrieves the active item from the flattened nodes based on the provided focus item value.\n */\nexport var getActiveItem = function getActiveItem(focusItemValue, flattenedNodes, valueKey) {\n  var nodeData = null;\n  var activeNode = Object.values(flattenedNodes).find(function (node) {\n    return shallowEqual(node[valueKey], focusItemValue);\n  });\n  if (activeNode) {\n    nodeData = activeNode;\n  }\n  return nodeData;\n};\n\n/**\n * Focuses on a specific tree node element.\n *\n */\nexport var focusTreeNode = function focusTreeNode(refKey, treeNodeRefs) {\n  var _treeItem$focus;\n  var treeItem = treeNodeRefs[refKey];\n  treeItem === null || treeItem === void 0 ? void 0 : (_treeItem$focus = treeItem.focus) === null || _treeItem$focus === void 0 ? void 0 : _treeItem$focus.call(treeItem);\n};\n/**\n * Focuses on the next item in a tree.\n */\nexport var focusNextItem = function focusNextItem(props) {\n  var focusItemValue = props.focusItemValue,\n    focusableItems = props.focusableItems,\n    treeNodesRefs = props.treeNodesRefs,\n    valueKey = props.valueKey;\n  var activeIndex = getActiveIndex(focusItemValue, focusableItems, valueKey);\n  if (focusableItems.length === 0) {\n    return;\n  }\n  var nextIndex = activeIndex === focusableItems.length - 1 ? 0 : activeIndex + 1;\n  var value = focusableItems[nextIndex][valueKey];\n  focusTreeNode(focusableItems[nextIndex].refKey, treeNodesRefs);\n  return value;\n};\n\n/**\n * Focuses on the previous item in a tree.\n */\nexport var focusPreviousItem = function focusPreviousItem(props) {\n  var focusItemValue = props.focusItemValue,\n    focusableItems = props.focusableItems,\n    treeNodesRefs = props.treeNodesRefs,\n    valueKey = props.valueKey;\n  var activeIndex = getActiveIndex(focusItemValue, focusableItems, valueKey);\n  if (focusableItems.length === 0) {\n    return;\n  }\n  var prevIndex = activeIndex === 0 ? focusableItems.length - 1 : activeIndex - 1;\n  prevIndex = prevIndex >= 0 ? prevIndex : 0;\n  var value = focusableItems[prevIndex][valueKey];\n  focusTreeNode(focusableItems[prevIndex].refKey, treeNodesRefs);\n  return value;\n};\n\n/**\n * Returns the index of the first visible node in the tree that matches the given value.\n */\nvar getScrollToIndex = function getScrollToIndex(nodes, value, valueKey) {\n  return nodes.filter(function (n) {\n    return n.visible;\n  }).findIndex(function (item) {\n    return item[valueKey] === value;\n  });\n};\n/**\n * Scrolls the list to the active tree node.\n *\n * @param props - The props object containing the necessary parameters.\n */\nexport function scrollToActiveTreeNode(props) {\n  var list = props.list,\n    value = props.value,\n    valueKey = props.valueKey,\n    virtualized = props.virtualized,\n    formattedNodes = props.formattedNodes;\n  if (virtualized && value) {\n    var _list$scrollToItem;\n    var scrollIndex = getScrollToIndex(formattedNodes, value, valueKey);\n    list === null || list === void 0 ? void 0 : (_list$scrollToItem = list.scrollToItem) === null || _list$scrollToItem === void 0 ? void 0 : _list$scrollToItem.call(list, scrollIndex);\n  }\n}\nexport var focusCurrentItem = function focusCurrentItem(props) {\n  var _props$selector = props.selector,\n    selector = _props$selector === void 0 ? SELECTED_TREEITEM_SELECTOR : _props$selector,\n    container = props.container;\n  var activeItem = container === null || container === void 0 ? void 0 : container.querySelector(selector);\n  if (activeItem) {\n    var _activeItem$focus, _activeItem$dataset;\n    activeItem === null || activeItem === void 0 ? void 0 : (_activeItem$focus = activeItem.focus) === null || _activeItem$focus === void 0 ? void 0 : _activeItem$focus.call(activeItem);\n    return (_activeItem$dataset = activeItem.dataset) === null || _activeItem$dataset === void 0 ? void 0 : _activeItem$dataset.key;\n  }\n};","map":{"version":3,"names":["shallowEqual","SELECTED_TREEITEM_SELECTOR","getFocusableItems","filteredData","props","isSearching","disabledItemValues","valueKey","childrenKey","expandItemValues","items","loop","nodes","forEach","node","disabled","some","disabledItem","visible","push","expand","includes","getActiveIndex","focusItemValue","focusItems","activeIndex","item","index","getActiveItem","flattenedNodes","nodeData","activeNode","Object","values","find","focusTreeNode","refKey","treeNodeRefs","_treeItem$focus","treeItem","focus","call","focusNextItem","focusableItems","treeNodesRefs","length","nextIndex","value","focusPreviousItem","prevIndex","getScrollToIndex","filter","n","findIndex","scrollToActiveTreeNode","list","virtualized","formattedNodes","_list$scrollToItem","scrollIndex","scrollToItem","focusCurrentItem","_props$selector","selector","container","activeItem","querySelector","_activeItem$focus","_activeItem$dataset","dataset","key"],"sources":["C:/Users/lenovo/OneDrive/Documents/local project/platfoorm45_technical_challenge/node_modules/rsuite/esm/Tree/utils/focusableTree.js"],"sourcesContent":["'use client';\nimport { shallowEqual } from \"../../internals/utils/index.js\";\n// Active tree node selector\nvar SELECTED_TREEITEM_SELECTOR = '[role=\"treeitem\"][aria-selected=\"true\"]';\n\n/**\n * Retrieves the focusable items from the filtered data based on the provided props.\n * Excludes nodes that are not visible or are disabled.\n */\nexport var getFocusableItems = function getFocusableItems(filteredData, props, isSearching) {\n  var disabledItemValues = props.disabledItemValues,\n    valueKey = props.valueKey,\n    childrenKey = props.childrenKey,\n    expandItemValues = props.expandItemValues;\n  var items = [];\n  var loop = function loop(nodes) {\n    nodes.forEach(function (node) {\n      var disabled = disabledItemValues.some(function (disabledItem) {\n        return shallowEqual(disabledItem, node[valueKey]);\n      });\n      if (!disabled && node.visible) {\n        items.push(node);\n      }\n      // always expand when searching\n      var expand = isSearching ? true : expandItemValues.includes(node[valueKey]);\n      if (node[childrenKey] && expand) {\n        loop(node[childrenKey]);\n      }\n    });\n  };\n  loop(filteredData);\n  return items;\n};\n\n/**\n * Returns the index of the active item in the focusItems array.\n *\n */\nvar getActiveIndex = function getActiveIndex(focusItemValue, focusItems, valueKey) {\n  var activeIndex = -1;\n  focusItems.forEach(function (item, index) {\n    if (shallowEqual(item[valueKey], focusItemValue)) {\n      activeIndex = index;\n    }\n  });\n  return activeIndex;\n};\n\n/**\n * Retrieves the active item from the flattened nodes based on the provided focus item value.\n */\nexport var getActiveItem = function getActiveItem(focusItemValue, flattenedNodes, valueKey) {\n  var nodeData = null;\n  var activeNode = Object.values(flattenedNodes).find(function (node) {\n    return shallowEqual(node[valueKey], focusItemValue);\n  });\n  if (activeNode) {\n    nodeData = activeNode;\n  }\n  return nodeData;\n};\n\n/**\n * Focuses on a specific tree node element.\n *\n */\nexport var focusTreeNode = function focusTreeNode(refKey, treeNodeRefs) {\n  var _treeItem$focus;\n  var treeItem = treeNodeRefs[refKey];\n  treeItem === null || treeItem === void 0 ? void 0 : (_treeItem$focus = treeItem.focus) === null || _treeItem$focus === void 0 ? void 0 : _treeItem$focus.call(treeItem);\n};\n/**\n * Focuses on the next item in a tree.\n */\nexport var focusNextItem = function focusNextItem(props) {\n  var focusItemValue = props.focusItemValue,\n    focusableItems = props.focusableItems,\n    treeNodesRefs = props.treeNodesRefs,\n    valueKey = props.valueKey;\n  var activeIndex = getActiveIndex(focusItemValue, focusableItems, valueKey);\n  if (focusableItems.length === 0) {\n    return;\n  }\n  var nextIndex = activeIndex === focusableItems.length - 1 ? 0 : activeIndex + 1;\n  var value = focusableItems[nextIndex][valueKey];\n  focusTreeNode(focusableItems[nextIndex].refKey, treeNodesRefs);\n  return value;\n};\n\n/**\n * Focuses on the previous item in a tree.\n */\nexport var focusPreviousItem = function focusPreviousItem(props) {\n  var focusItemValue = props.focusItemValue,\n    focusableItems = props.focusableItems,\n    treeNodesRefs = props.treeNodesRefs,\n    valueKey = props.valueKey;\n  var activeIndex = getActiveIndex(focusItemValue, focusableItems, valueKey);\n  if (focusableItems.length === 0) {\n    return;\n  }\n  var prevIndex = activeIndex === 0 ? focusableItems.length - 1 : activeIndex - 1;\n  prevIndex = prevIndex >= 0 ? prevIndex : 0;\n  var value = focusableItems[prevIndex][valueKey];\n  focusTreeNode(focusableItems[prevIndex].refKey, treeNodesRefs);\n  return value;\n};\n\n/**\n * Returns the index of the first visible node in the tree that matches the given value.\n */\nvar getScrollToIndex = function getScrollToIndex(nodes, value, valueKey) {\n  return nodes.filter(function (n) {\n    return n.visible;\n  }).findIndex(function (item) {\n    return item[valueKey] === value;\n  });\n};\n/**\n * Scrolls the list to the active tree node.\n *\n * @param props - The props object containing the necessary parameters.\n */\nexport function scrollToActiveTreeNode(props) {\n  var list = props.list,\n    value = props.value,\n    valueKey = props.valueKey,\n    virtualized = props.virtualized,\n    formattedNodes = props.formattedNodes;\n  if (virtualized && value) {\n    var _list$scrollToItem;\n    var scrollIndex = getScrollToIndex(formattedNodes, value, valueKey);\n    list === null || list === void 0 ? void 0 : (_list$scrollToItem = list.scrollToItem) === null || _list$scrollToItem === void 0 ? void 0 : _list$scrollToItem.call(list, scrollIndex);\n  }\n}\nexport var focusCurrentItem = function focusCurrentItem(props) {\n  var _props$selector = props.selector,\n    selector = _props$selector === void 0 ? SELECTED_TREEITEM_SELECTOR : _props$selector,\n    container = props.container;\n  var activeItem = container === null || container === void 0 ? void 0 : container.querySelector(selector);\n  if (activeItem) {\n    var _activeItem$focus, _activeItem$dataset;\n    activeItem === null || activeItem === void 0 ? void 0 : (_activeItem$focus = activeItem.focus) === null || _activeItem$focus === void 0 ? void 0 : _activeItem$focus.call(activeItem);\n    return (_activeItem$dataset = activeItem.dataset) === null || _activeItem$dataset === void 0 ? void 0 : _activeItem$dataset.key;\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}